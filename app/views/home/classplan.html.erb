<!-- dual listbox -->
<script src="http://code.jquery.com/jquery-latest.js"></script>
<!-- end dual listbox -->

<h2>Sınıf Programı</h2>
<p style="margin-left:800px;margin-top:-80px;">
  <%= link_to "","classplanpdf", :id => "pdf_button" %>
</p>
<table class="custom">
  <tr>
    <td class="label">Sınıf</td>
    <td>
      <%= Classroom.find(session[:classroom_id]).name %>
    </td>
  </tr>
  <tr>
    <td class="label">Kapasite</td>
    <td>
      <%= Classroom.find(session[:classroom_id]).capacity %>
    </td>
  </tr>
  <tr>
    <td class="label">Verilen Ders</td>
    <td>
      <select id="course_ids" name="course_ids">
        <% session[:course_ids].each do |k, v| %>
          <option value="<%= k %>" selected>
            <%= v %>
          </option>
        <% end %>
      </select>
    </td>
  </tr>

  <tr>
    <td class="info" colspan=2>
      <style>
        #table { margin-left:-20px;}
        #table th{
          font-size:10px;
          padding:0em;
          border:1px solid #ddd;
        }
        #table th.clock{min-height:20px;height:20px;min-width:65px;width:65px;}
        #table th.course{min-height:80px;height:80px;min-width:170px;width:170px;}
        #table th.header{min-height:20px;height:20px;background-color:#ccc;}
        #table th.launch{min-height:20px;height:20px;background-color:#ccc;}
        #table th { font-weight:lighter }
      </style>
      <div id="table">
        <table>
          <tr>
            <th class="clock, header"><%= @header[0][0] %></th>
            <% @header[0].slice(1..-1).each do |day| %>
              <th class="header"><%= day %></th>
            <% end %>
          </tr>
          <% @morning.each do |col| %>
          <tr>
            <th class="clock"><%= col[0].gsub('-', ':') %></th>
            <% col.slice(1..-1).each_with_index do |c, i| %>
              <th class='course' id="<%= @day.keys[i] + col[0].slice(0..4) %>">
                <%= c %>
              </th>
            <% end %>
          </tr>
          <% end %>
          <% @launch.each do |col| %>
          <tr>
            <th class="clock, launch"><%= col[0].gsub('-', ':') %></th>
            <% col.slice(1..-1).each_with_index do |c, i| %>
              <th class='launch' id="<%= @day.keys[i] + col[0].slice(0..4) %>">
                <%= c %>
              </th>
            <% end %>
          </tr>
          <% end %>
          <% @evening.each do |col| %>
          <tr>
            <th class="clock"><%= col[0].gsub('-', ':') %></th>
            <% col.slice(1..-1).each_with_index do |c, i| %>
              <th class='course' id="<%= @day.keys[i] + col[0].slice(0..4) %>">
                <%= c %>
              </th>
            <% end %>
          </tr>
          <% end %>
        </table>
      </div>
    </td>

  </tr>
</table>


<!-- dual listbox -->
<script>
  $("#course_ids").change(function () {
    var part = $(this).val().split('#');
    if (part[0] != "") {
      if (part[0].indexOf(';') >= 0)
        var days = part[0].split(';');
      else
        var days = [part[0]];
      var assignment_id = part[1];
      $('th').css('border', "1px solid #ddd");
      for (var i = 0; i < days.length; i++) {
        $('#' + days[i]).css('border', "1px solid #35addf");
      }

      $("#select_assignment_id").html("<input type='hidden' id='assignment_id' name='assignment_id' value='" + assignment_id + "'/>");
    }
  })
  .trigger('change');
</script>
<!-- end dual listbox -->
